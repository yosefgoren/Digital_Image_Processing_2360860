## היווצרות תמונה - Image Formation
### קוונטיזציה - Quantization
ידוע גם ככימות, כימוי.

מעבר מרציף לבדיד של רמת הבהירות של התמונה.
ניתן להתייחס לדגימה כאילו קרתה לפני או אחרי הדגימה.

קוונטייזר - מערכת שמבצעת קוונטיזציה. תחום אינסופי וטווח סופי (בדיד).

תכונות של קוונטייזר במקרה הכללי:
1. לא לינארי
2. חסר זיכרון
3. קבוע במקום
4. לא הפיך

**הגדרות**:
* **תמונה טבעית**: תמונה שניתן להשיג מהטבע, ממקור חיצוני ולא דיגיטלי. היא בעלת סטטיסטיקה כזו שהיא מכילה הרבה איזורים חלקים, מעט מעברים ומעט טקסטורות. לרוב מיוצגות ב-8 ביט (256 רמות בהירות לכל צבע).
* רמות יצוג: הערכים הסקלארים אחרי קוונטיזציה
* רמות החלטה: נקודות בדידות ב**בתחום** של הקוונטייזר אשר בניהם המת היצוג שפולט הקווינטייזר משתנה.

למעשה בני אדם לא מדבילים בין רמות ייצוג ממש קרובות:
<img src="half_half.bmp" style="width: 150%;">

**תהליך קוונטיזציה:**
1. מגדירים את הקצוות של תחום רמות האפור
$r_k\in[0, R]^K$
2. בוחרים מספר רמות ייצוג:
$f_k\in[0, N]^K$
רמות ההחלטה הקיצונית:

$r_0=0, r_N=r_8=R$
ונוצרת לנו פונקציית מדרגות, מונוטונית עולה:

<iframe src="https://www.desmos.com/calculator/xv26a3ovhr?embed" width="500" height="500" style="border: 1px solid #ccc" frameborder=0></iframe>

**קוונטייזר אחיד**:
1. מרווח קוונטיזציה אחיד:
$q=f_k-f_{k-1}=r_k-r_{k-1}=const$
2. אופציונאלי:
$f_k=\frac{r_k+r_{k-1}}{2}$

**דוגמה**
נרצה לתכנן קוונטייזר אחיד ל-2ביט (4 רמות אפור) לתחום 0 עד 1.

$$
N=4, r_0=0,r_4=1
$$
$$
q=r_k-r_{k-1}=\frac{r_k-r_{k-2}}{2}=\frac{1}{4}
\Rightarrow r_k = r_0+kq
\Rightarrow r_1=1/4, r_2=1/2, r_3=3/4
$$
$$
f_k=\frac{r_k+r_{k+1}}{2}
\Rightarrow f_k=r_0+q(k-1/2)
$$
<iframe src="https://www.desmos.com/calculator/alq2njnv4h?embed" width="500" height="500" style="border: 1px solid #ccc" frameborder=0></iframe>

**הגדרה - שגיאה**:

$$
e=r-r'=r-Q(r)
$$
ובמקרה של הדוגמה:
<iframe src="https://www.desmos.com/calculator/yyootfvbh3?embed" width="500" height="500" style="border: 1px solid #ccc" frameborder=0></iframe>
תוכלת השגיאה:
$$
E[e] = 0
$$
תוכלת ריבוע השגיאה - MSE:
$$
E[e^2]=\frac{q^2}{12}
$$
נוסחא ככלית ל-MSE:
$$
\frac{1}{MN}\sum_{m,n}[f[m,n]]-f_Q[m,n]
$$
$$
= \sum_{k\in[N]}\int_{r_{k-1}}^{r_k}(r-f_k)^2p_{r_k}(r)dr
$$
$$
\frac{1}{MN}\sum_{k\in[N]}]f_k-Q(f_k)]^2h(f_k)
$$

**קוונטייזר מקס-לוייד, האופטימלי**:
אופטימאלי ביחד למטקירה:
$$
d(r,r')
$$

שמוגדר לכל תמונה כניסה בנפרד. מטריקה מוגדרת ע"י:
![[Pasted image 20251110115958.png]]

definitions:
1. $P_r(r)$ - greyscale density / distribution
2. $N$ - number of representation levels
3. $d$ - metric
הגדרת מטריקה:
$$
d=\int_{r_0}^{r_N}d(r,r')P_r(r)dr
$$
אחרי גזירה והשוואה לאפס בכל אחד מהמשתנים $r_k$ מתקבלים תנאים:
$$
d(r_k,f_k)=d(r_k,f_{K=1})
$$
ואם גוזרים במשתנים $f_k$ מקבלים תנאים:
$$
\int_{r_{k-1}}^{r_k}\frac{\sigma d(r,f_k)}{\sigma f_k}P_r(r)dr = 0
$$

### דגימה
### דחיסה - jpeg
### נוספים: ניקוי רעש, חידוד